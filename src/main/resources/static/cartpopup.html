<div id="cartPopupOverlay" class="d-none position-fixed z-2 shadow end-0 w-25 overflow-hidden  m-2" style=" height: 90vh;">
	<div id="cartPopupContent" class="z-3 h-100 w-100 bg-light rounded-3 shadow-sm p-3 overflow-hidden">
        
        <!--  cart item -->
        <div class="d-flex flex-column w-100 overflow-hidden" style="height: 25vh;">
            <div class="d-flex flex-row display-flex align-items-center justify-content-end" style="height: 20vh;">
                <img id="cart-chatter-image" class="object-fit-cover rounded-3 w-50" style="height: 20vh;">
                <div class="flex-column w-30 p-2">
                    <h3 id="cart-chatter-name" class="m-0 p-0"></h3>
                    <h5 id="cart-chatter-username" class="mt-0 mb-5"></h5>
                    <h5 id="cart-chatter-price" class="mb-0"></h5>
                </div>
                <div class="d-flex flex-column h-100 align-items-end justify-content-end flex-grow-1">
                    <a href="#"><img class="m-0 p-0" style="width: 25px;" src="images/AIchatlogopink.png" alt="Logo"></a>
                    <i class="d-flex justify-content-center pt-2 w-25 fs-3 cursor-pointer fa-solid fa-trash"></i>
                    <i id="check-icon" class="d-flex justify-content-center pt-2 w-25 fs-3 cursor-pointer fa-regular fa-square-check"></i>
                </div>
            </div>
        </div>

        <!-- total texts -->
        <div class="position-absolute w-90" style="bottom: 60px; right: 10px; left: 10px;">
            <div class="d-flex justify-content-between">
                <h5>Subtotal</h5>
                <h5 id="cart-subtotal"></h5>
            </div>
            <div class="d-flex justify-content-between">
                <h5>Discounts</h5>
                <h5>-$0.00</h5>
            </div>
            <div class="d-flex justify-content-between">
                <h5>Tax + Fees</h5>
                <h5 id="cart-tax"></h5>
            </div>
        </div>

        <!-- checkout button -->
        <div>
			<button id="checkoutButton" class="d-block position-absolute px-1 py-2 bottom-0 mb-3 w-75 bg-light rounded-2 translate-middle-x" style="left: 50%; color: #FF206E; border-color: #FF206E;">Checkout</button>
		</div>
	</div>
</div>

<script>
    var cartPopupOpen = false;
    // Function to open the cart popup overlay
    function openCartPopup() {
    	$('.cart-icon').addClass('active');
    	$('#cartPopupOverlay').removeClass('d-none').fadeIn();
        $('#cartPopupOverlay').fadeIn();
        cartPopupOpen = true; // Set popupOpen to true when popup is opened
    }
    // Function to close the cart popup overlay
    function closeCartPopup() {
    	$('#cartPopupOverlay').fadeOut(function() {
            $(this).addClass('d-none');
        });
        $('.cart-icon').removeClass('active');
        cartPopupOpen = false; // Set popupOpen to false when popup is closed
    }
    // Test if user clicks outside popup
    $(document).on('click', function(event) {
        var $target = $(event.target);
        if (cartPopupOpen && !$target.closest('#cartPopupContent').length && !$target.is('#cartPopupContent')) {
            closeCartPopup();
        }
    });
    // Prevent popup from closing when clicked inside
    $('#cartPopupContent').on('click', function(event) {
        event.stopPropagation();
    });
    // Event listener for the icon click to open the popup
    $('.openCartPopupIcon').on('click', function(event) {
        event.stopPropagation(); // Prevent event propagation
        openCartPopup();
    });
    
 // Toggle check/uncheck icon
    $(document).ready(function() {
        $('#check-icon').on('click', function() {
            $(this).toggleClass("f-regular fa-square");
        });
    });
    $('#checkoutButton').on('click', function() {
        window.location.href = 'purchasepage.html';
    });
</script>