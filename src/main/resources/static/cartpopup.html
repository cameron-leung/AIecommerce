<div id="cartPopupOverlay" >
    <!-- Container for the content of cartpopup.html -->
    <div id="cartPopupContent">
        <div class="cartitem">
            <div class="horizontal" style="display: flex; align-items: center;">
                <img src="images/LiliRectangle.png" style="width: 150px; height: 150px;  border-radius: 5px; object-fit: cover;">
                <div class="vertical" style="width: 36%; padding-left: 10px;">
                    <h1 style="margin: 0px;">Lili</h1>
                    <h2 style="margin: 0px;">@B
                    <span class="break"></span></h2>
                    <h2 style="margin: 0px;">$2.00</h2>
                </div>
                <div class="carticons">
                    <a href="#">
                        <img style="width: 25px; padding: 0px; margin: 0px;" src="images/AIchatlogopink.png" alt="Logo"> 
                    </a>
                    <i style="width: 25%;" class="fa-solid fa-trash"></i>
                    <i style="width: 25%;" class="fa-regular fa-square-check"></i>
                </div>
            </div>
        </div>
        <div class = "cart-item">
        	<h2 style = "margin: 0px">Subtotal</h2>
        </div>
        <button id="checkoutButton" class="checkoutButton" style="color: #FF206E; border-color: #FF206E;">Checkout</button>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    var popupOpen = false; // Variable to track if popup is open

    // Function to open the cart popup overlay
    function openCartPopup() {
    	$('.cart-icon').addClass('active');
        $('#cartPopupOverlay').fadeIn();
        popupOpen = true; // Set popupOpen to true when popup is opened
    }

    // Function to close the cart popup overlay
    function closeCartPopup() {
        $('#cartPopupOverlay').fadeOut();
        $('.cart-icon').removeClass('active');
        popupOpen = false; // Set popupOpen to false when popup is closed
    }

    // Event delegation to close the popup when clicked outside
    $(document).on('click', function(event) {
        var $target = $(event.target);
        if (popupOpen && !$target.closest('#cartPopupContent').length && !$target.is('#cartPopupContent')) {
            closeCartPopup();
        }
    });

    // Prevent the popup from closing when clicked inside
    $('#cartPopupContent').on('click', function(event) {
        event.stopPropagation();
    });

    // Event listener for the icon click to open the popup
    $('.openCartPopupIcon').on('click', function(event) {
        event.stopPropagation(); // Prevent event propagation
        openCartPopup();
    });
</script>